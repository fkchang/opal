<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <title>Opal</title>
  <style>
    body {
      line-height: 22px;
      font-size: 14px;
      font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif;
    }

    .content {
      padding: 50px 50px 50px 50px;
      width: 650px;
    }

    p {
      width: 650px;
    }

    pre, code {
      font-family: Menlo, Monaco, Consolas, "Lucida Console", monospace;
      font-size: 12px;
    }

    pre {
      line-height: 17px;
      color: #444444;
      white-space: pre;
      padding: 3px 0px 3px 12px;
      margin: 0px 0px 8px;

      background: #FAFAFA;
      -webkit-box-shadow: rgba(0,0,0,0.07) 0 1px 2px inset;
      -webkit-border-radius: 3px;
      -moz-border-radius: 3px;
      border-radius: 3px;
      border: 1px solid #DDDDDD;
    }

    code {
      background-color: #FAFAFA;
      padding: 1px;
      color: #444444;
      border: 1px solid #DEDEDE;
    }

    pre code {
      border: none;
      padding: 0px;
    }

    a {
      color: #212121;
    }
  </style>
</head>
<body>
  <div class="content">
    <h1 id='opal'>Opal</h1>

    <p>
      <strong>Opal is a ruby to javascript compiler</strong>. Opal aims to
      take ruby files and generate efficient javascript that maintains rubys
      features. Opal will, by default, generate fast and efficient code in
      preference to keeping all ruby features.
    </p>

    <p>
      Opal comes with an implementation of the ruby corelib, written in ruby,
      that uses a bundled runtime (written in javascript) that tie all the
      features together. Whenever possible Opal bridges to native javascript
      features under the hood. The Opal gem includes the compiler used to
      convert ruby sources into javascript.
    </p>

    <p>
      Opal is <a href='http://github.com/adambeynon/opal'>hosted on github</a>,
      and there is a Freenode IRC channel at <code>#opal</code>.
    </p>

    <h2 id='downloads'>Downloads</h2>

    <p>
      The Opal runtime and corelib are distributed here, and are required to
      run any code generated by opal.
    </p>

    <p>
      <strong>Production</strong> version to be used in real apps/sites.
    </p>

    <p>
      <a href='http://opalrb.org/opal.js'>
        Production version 0.3.15
      </a>
      <em>(120kb Uncompressed, 13.7kb Minified And Gzipped)</em>
    </p>

    <p>
      <strong>Debug</strong> version adds a lot of additional debug code.
      See the debug section below.
    </p>

    <p>
      <a href='http://opalrb.org/opal.debug.js'>
        Debug version 0.3.15
      </a>
      <em>(183kb Uncompressed)</em>
    </p>

    <h2 id='installation'>Installation</h2>

    <p>Opal comes distributed as a gem, so either install with:</p>

    <pre><code>gem install opal</code></pre>

    <p>Or add to your Gemfile:</p>

    <pre><code>gem &quot;opal&quot;</code></pre>

    <h2 id='usage'>Usage</h2>

    <p>
      Opal provides an <code>opal</code> command which can be used to
      compile ruby sources into javascript. These can then be used in
      any browser/javascript environment. Opal also comes with the
      ability to run files direcly using
      <a href='http://github.com/cowboyd/therubyracer'>therubyracer</a>,
      which is a gem to embed v8 into ruby. This also allows Opal to provide
      a REPL to run ruby code directly against the Opal runtime.
    </p>

    <h3 id='repl'>REPL</h3>

    <p>To run the ruby repl, simply run:</p>

    <pre><code>opal</code></pre>

    <p>from the command line. To exit, type <code>exit</code>.</p>

    <h3 id='running_a_ruby_file'>Running a ruby file</h3>

    <p>
      Opal can compile/eval any ruby file inside the v8 context by simply
      passing a path to run:
    </p>

    <pre><code>opal path/to/file.rb</code></pre>

    <p>Try running some code with <code>puts</code> statements.</p>

    <h3 id='compiling_ruby_sources'>Compiling Ruby Sources</h3>

    <p>If you have a ruby source <code>foo.rb</code>:</p>

<pre>
# foo.rb

puts "Wow, running ruby"
</pre>

    <p>Compile it into <code>foo.js</code> using:</p>

<pre>
opal -c foo.rb
</pre>

    <p>
      The generated code includes a wrapper which will register the
      file with opal. Opal maintains an internal file system to make
      <code>require()</code> work as expected. You will see this in
      the output:
    </p>

<pre>
// foo.js
opal.file('/foo.rb', function() {
  // compiled ruby code
});
</pre>

    <p>
      This file is not enough to run by itself. It depends on
      <code>opal.js</code> which can be downloaded above. Finally,
      compiling a ruby source creates a wrapper around the code which
      will register the file with the opal runtime. To actually load
      this code, you can use the <code>main()</code> function:
    </p>

<pre>
opal.main('/foo.rb');
</pre>

    <p>These files can be added to a HTML page:</p>

<pre>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;script src="opal.js"&gt;&lt;/script&gt;
    &lt;script src="foo.js"&gt;&lt;/script&gt;
    &lt;script&gt;
      opal.main('/foo.rb');
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;

  &lt;/body&gt;
&lt;/html&gt;
</pre>

    <p>Open this file and check out the browsers' console.</p>

    <h2 id="change_log">Change Log</h2>

    <h3>Edge</h3>

      <ul>
        <li>Added HEREDOCS support in parser</li>
        <li>Parser now handles masgn (mass/multi assignments)</li>
        <li>More useful DependencyBuilder class to build gems dependencies</li>
        <li>Blocks no longer passed as an argument in method calls</li>
      </ul>

    <h3>0.3.15</h3>

    <p>Initial Release.</p>
  </div>
</body>
</html>
